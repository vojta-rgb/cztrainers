/* --------- Tokens (light default) --------- */
:root{
  --navbar-h:64px;
  --panel-w:340px;

  --panel-bg:#fff;
  --panel-text:#111;
  --panel-border:rgba(0,0,0,.08);
  --input-bg:#fff;
  --input-text:#111;
  --input-border:rgba(0,0,0,.14);
  --hint-text:rgba(0,0,0,.70);
  --fab-bg:#0072CE;
  --fab-text:#fff;
}

/* --------- DARK via body.dark (your toggle) --------- */
body.dark{
  --panel-bg:#161616;
  --panel-text:#fff;
  --panel-border:rgba(255,255,255,.08);
  --input-bg:#121212;
  --input-text:#fff;
  --input-border:#2a2a2a;
  --hint-text:rgba(255,255,255,.75);
  --fab-bg:#2b7dff;
  --fab-text:#fff;
}

/* --------- Layout --------- */
.map-layout{
  position:relative;
  display:grid;
  grid-template-columns:var(--panel-w) 1fr;
  height:calc(100vh - var(--navbar-h));
}

/* --------- Sidebar --------- */
.map-panel{
  background:var(--panel-bg);
  color:var(--panel-text);
  border-right:1px solid var(--panel-border);
  padding:16px;
  overflow:auto;
  color-scheme:light;
}
body.dark .map-panel{ color-scheme:dark; }

.map-panel__header{
  display:flex;align-items:center;justify-content:space-between;gap:8px;
  margin-bottom:8px;
}
.map-panel__header h1{ margin:0;font-size:1.25rem; }
.map-panel__close{
  border:none;background:transparent;font-size:1.5rem;line-height:1;
  cursor:pointer;opacity:.7;
}
.map-panel__close:hover{ opacity:1; }
.map-panel__section{ margin:12px 0; }
.map-panel__hint{ font-size:.85rem;color:var(--hint-text);margin-top:10px; }

/* Fields */
.map-field{ display:grid;gap:6px; }
.map-field span{ font-size:.9rem;opacity:.9; }
.map-field input,
.map-field select{
  width:100%;
  box-sizing:border-box;
  background:var(--input-bg);
  color:var(--input-text);
  border:1px solid var(--input-border);
  border-radius:10px;
  padding:10px 12px;
  font:inherit;outline:none;
}
.map-field input:focus,
.map-field select:focus{
  border-color:rgba(0,114,206,.6);
  box-shadow:0 0 0 3px rgba(0,114,206,.15);
}
.map-field input::placeholder{ color:var(--hint-text); }

/* Make the location search fit the panel */
#searchPlace{ display:block;width:100%; }

/* Google Places dropdown (when enabled later) */
.pac-container{
  z-index:2000 !important;
  border-radius:10px;
  overflow:hidden;
  border:1px solid var(--panel-border);
  background:var(--panel-bg);
  color:var(--panel-text);
  box-shadow:0 10px 24px rgba(0,0,0,.18);
}
.pac-item{ color:var(--panel-text); }
.pac-item:hover{ background:rgba(0,0,0,.05); }
body.dark .pac-item:hover{ background:rgba(255,255,255,.07); }

/* --------- Map area --------- */
.map-canvas-wrap{ position:relative; }
.map-canvas{ width:100%;height:100%; }

/* Floating button (open filters) */
.map-fab{
  position:absolute;bottom:16px;left:16px;
  border:none;border-radius:999px;
  padding:10px 14px;font-weight:600;
  background:var(--fab-bg);color:var(--fab-text);
  box-shadow:0 4px 16px rgba(0,0,0,.2);
  cursor:pointer;
}
.map-fab:hover{ filter:brightness(1.05); }

/* InfoWindow */
.map-iw{ min-width:220px; }
.map-iw__row{ display:flex;gap:10px;align-items:center; }
.map-iw__avatar{ width:48px;height:48px;border-radius:50%;object-fit:cover; }
.map-iw__meta small{ display:block;opacity:.8;line-height:1.2;margin-top:2px; }
.map-iw__btn{ display:inline-block;margin-top:8px; }

/* --------- Mobile drawer --------- */
@media (max-width:980px){
  .map-layout{
    grid-template-columns:1fr;
    height:calc(100vh - 56px);
  }
  .map-panel{
    position:absolute;z-index:5;
    top:0;bottom:0;left:0;
    width:min(92vw,380px);
    transform:translateX(-100%);
    transition:transform .24s ease;
    box-shadow:0 10px 24px rgba(0,0,0,.25);
    border-right:none;border-radius:0 16px 16px 0;
  }
  .map-panel.open{ transform:translateX(0); }
  .map-canvas-wrap.panel-open .map-fab{ display:none; }

  .pac-container{ max-width:min(92vw,380px); }
}

/* tell Maps which scheme to render in */
.map-canvas { color-scheme: light; }     /* default */
body.dark .map-canvas { color-scheme: dark; }  /* when your toggle adds body.dark */

/* optional: allow UA to know both are supported */
.map-canvas { color-scheme: light dark; }